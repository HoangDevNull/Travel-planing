import React from 'react';

import {
  Container,
  makeStyles,
  Divider,
  Button,
  Avatar,
  Box,
  Typography,
  IconButton
} from '@material-ui/core';

import Content from './Content';
import HeadSessions from './HeadSessions';
import { useHistory, useParams } from 'react-router-dom';

import { postData } from 'components/TopStories/data';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { library } from '@fortawesome/fontawesome-svg-core';
import { fab } from '@fortawesome/free-brands-svg-icons';
import { far } from '@fortawesome/free-regular-svg-icons';
import { fas } from '@fortawesome/free-solid-svg-icons';

library.add(fab, far, fas);

const useStyles = makeStyles((theme) => ({
  root: {
    position: 'absolute',
    display: 'flex',
    flexDirection: 'column',
    alignItems: 'center',
    justifyContent: 'center',
    top: '150%',
    left: 5,
    padding: '35px 0px 35px 15px',
    [theme.breakpoints.down('sm')]: {
      display: 'none'
    }
  },

  avatar: {
    width: theme.spacing(6.5),
    height: theme.spacing(6.5)
  },
  font_bold: {
    fontWeight: 'bold'
  },
  icon: {
    cursor: 'pointer',
    marginTop: 5
  }
}));

const StoryDetail = () => {
  const classes = useStyles();
  const history = useHistory();
  const { id } = useParams();

  React.useEffect(() => {
    const { location } = history;
    if (location.pathname.includes('/preview')) return;
    if (id) {
    }
  }, [id, history]);
  const post = postData.find((x) => x.id === Number(id));
  return (
    <>
      <Box className={classes.root}>
        <Avatar
          src={post?.user?.avatar}
          className={classes.avatar}
          spacing={3}
        />
        <Typography variant='h6' className={classes.font_bold} gutterBottom>
          {post?.user?.username}
        </Typography>
        <Button variant='outlined' color='primary'>
          Follow
        </Button>
        <Box width='100%' height='1px' bgcolor='#333' my={2} />
        <svg
          width='37'
          height='42'
          viewBox='0 0 42 47'
          fill='none'
          className={classes.icon}
        >
          <path
            fillRule='evenodd'
            clipRule='evenodd'
            d='M19.6374 0.856567L21.0001 6.37041L22.3629 0.856567H19.6374ZM25.1601 7.87419L28.4594 3.12151L25.8953 2.24895L25.1601 7.87419ZM13.6125 3.12151L16.9119 7.87419L16.1767 2.24895L13.6125 3.12151ZM35.1298 40.9944C33.6463 42.6591 31.6364 43.7193 29.4636 43.9834L30.3422 43.1479C35.5063 37.7826 36.5284 32.046 33.3725 26.0494L31.4001 22.4478L29.6788 18.6977C29.1229 17.4538 29.2663 16.507 30.127 15.8201C30.2935 15.688 30.4847 15.5933 30.6885 15.5422C30.8923 15.491 31.1041 15.4845 31.3105 15.523C31.9201 15.6158 32.4939 16.0428 32.8884 16.6369L37.9987 25.9566C40.1146 29.6139 40.4732 35.462 35.1298 40.9944ZM11.3174 40.029L2.31599 30.7093C2.07026 30.4498 1.90349 30.1214 1.83636 29.7647C1.76922 29.408 1.80467 29.0387 1.93831 28.7027C2.07195 28.3666 2.2979 28.0786 2.58816 27.8743C2.87842 27.67 3.22021 27.5583 3.57117 27.5532C3.81142 27.5518 4.04951 27.6003 4.27129 27.696C4.49307 27.7917 4.69402 27.9325 4.8622 28.1102L9.52427 32.9371C9.67169 33.0922 9.87259 33.1803 10.0828 33.1821C10.2929 33.1838 10.4952 33.099 10.645 32.9464C10.7948 32.7937 10.8799 32.5858 10.8815 32.3681C10.8832 32.1505 10.8013 31.9412 10.6539 31.7861L5.93806 26.922L2.80013 23.6731C2.61243 23.5067 2.45998 23.3019 2.35235 23.0715C2.24472 22.8412 2.18424 22.5903 2.1747 22.3347C2.16516 22.079 2.20677 21.824 2.29692 21.5858C2.38707 21.3475 2.52381 21.1312 2.69855 20.9503C2.8733 20.7693 3.08228 20.6278 3.31238 20.5344C3.54248 20.4411 3.78873 20.398 4.03568 20.4079C4.28262 20.4178 4.52493 20.4804 4.74739 20.5918C4.96985 20.7032 5.16766 20.8611 5.32841 21.0554L12.7698 28.76C12.8433 28.838 12.9311 28.9 13.0281 28.9423C13.1251 28.9847 13.2293 29.0065 13.3346 29.0065C13.4399 29.0065 13.5441 28.9847 13.6411 28.9423C13.7381 28.9 13.8259 28.838 13.8994 28.76C14.0462 28.6069 14.1285 28.4001 14.1285 28.1844C14.1285 27.9688 14.0462 27.7619 13.8994 27.6089L6.47599 19.9044L4.36013 17.7137C4.03159 17.3667 3.84756 16.9001 3.84756 16.4141C3.84756 15.9282 4.03159 15.4616 4.36013 15.1146C4.70049 14.7776 5.15331 14.5894 5.62427 14.5894C6.09524 14.5894 6.54805 14.7776 6.88841 15.1146L9.00427 17.2681L16.4457 24.9912C16.5934 25.1431 16.7933 25.2284 17.0015 25.2284C17.2098 25.2284 17.4096 25.1431 17.5574 24.9912C17.6327 24.9151 17.6926 24.8242 17.7335 24.7238C17.7744 24.6233 17.7955 24.5154 17.7955 24.4064C17.7955 24.2974 17.7744 24.1895 17.7335 24.0891C17.6926 23.9887 17.6327 23.8977 17.5574 23.8216L10.116 16.1171C9.94791 15.948 9.81383 15.7461 9.7215 15.523C9.62918 15.3 9.58043 15.0602 9.57806 14.8175C9.58043 14.5749 9.62918 14.3351 9.7215 14.1121C9.81383 13.889 9.94791 13.6871 10.116 13.518C10.452 13.1722 10.9064 12.9781 11.3801 12.9781C11.8538 12.9781 12.3083 13.1722 12.6443 13.518L25.196 26.4764C25.3294 26.6021 25.5004 26.6767 25.6804 26.6877C25.8605 26.6987 26.0387 26.6455 26.1855 26.5369C26.3323 26.4284 26.4387 26.2711 26.487 26.0911C26.5354 25.9112 26.5227 25.7196 26.4512 25.5482L24.0305 20.2571C23.4746 18.9947 23.6181 18.0479 24.4788 17.361C24.6457 17.2299 24.837 17.1359 25.0406 17.0848C25.2442 17.0336 25.4558 17.0266 25.6622 17.0639C26.2719 17.1753 26.8456 17.5837 27.2401 18.1778L31.9919 26.8477C34.807 32.1945 33.9105 37.1328 29.2125 41.9969C28.0624 43.2439 26.6318 44.1765 25.0484 44.711C23.4651 45.2456 21.7785 45.3655 20.1394 45.0601C16.7616 44.3573 13.675 42.5941 11.2994 40.0104L11.3174 40.029ZM18.3105 11.9585L22.9008 16.7112C22.0043 17.8251 21.8967 19.3289 22.6319 20.944L23.0981 21.9837L15.4774 14.0935C15.3419 13.837 15.268 13.5504 15.2622 13.2581C15.2642 12.771 15.4509 12.3043 15.7822 11.9585C16.1226 11.6215 16.5754 11.4334 17.0463 11.4334C17.5173 11.4334 17.9701 11.6215 18.3105 11.9585ZM34.2512 15.7829C33.5698 14.7433 32.6374 14.0749 31.5794 13.9079C31.1598 13.8349 30.7301 13.8516 30.3169 13.957C29.9037 14.0624 29.5157 14.2541 29.1767 14.5205C28.4953 15.0589 28.0829 15.7272 27.9036 16.4884C27.3615 15.9451 26.6744 15.5829 25.9312 15.4488C25.3293 15.3522 24.7134 15.4359 24.156 15.6901L19.4222 10.7889C18.7907 10.1393 17.9366 9.77471 17.0463 9.77471C16.1561 9.77471 15.302 10.1393 14.6705 10.7889C14.253 11.2262 13.9559 11.771 13.8098 12.3669C13.1768 11.7081 12.3173 11.3361 11.4197 11.3326C10.5221 11.3291 9.65992 11.6944 9.0222 12.3484C8.57824 12.8075 8.26761 13.3864 8.12565 14.0192C6.76289 12.6269 4.53944 12.6269 3.28427 13.945C2.9709 14.2691 2.7223 14.654 2.55268 15.0777C2.38307 15.5014 2.29577 15.9555 2.29577 16.4141C2.29577 16.8728 2.38307 17.3269 2.55268 17.7506C2.7223 18.1742 2.9709 18.5592 3.28427 18.8833C2.74634 19.1061 2.19048 19.4217 1.72427 19.9044C1.4109 20.2285 1.1623 20.6134 0.992685 21.0371C0.823071 21.4608 0.73577 21.9149 0.73577 22.3735C0.73577 22.8322 0.823071 23.2863 0.992685 23.71C1.1623 24.1337 1.4109 24.5186 1.72427 24.8427L2.83599 25.9937C2.25104 26.1357 1.71337 26.437 1.27863 26.8663C0.843889 27.2957 0.527878 27.8376 0.363306 28.4358C0.198734 29.0341 0.191582 29.667 0.342591 30.2691C0.493599 30.8712 0.79728 31.4206 1.2222 31.8603L10.2056 41.18C13.0746 44.1504 16.5174 46.0812 19.8884 46.6753C20.5875 46.7976 21.2952 46.8597 22.0043 46.861C23.8512 46.861 25.5905 46.3968 27.2043 45.5614C28.8642 45.7721 30.5487 45.5723 32.1196 44.9785C33.6906 44.3847 35.1031 43.4138 36.2415 42.1454C42.2305 35.9447 41.7643 29.2798 39.3615 25.1212L34.2153 15.7644L34.2512 15.7829Z'
            fill='black'
          />
        </svg>
        <svg
          width='22'
          height='31'
          viewBox='0 0 27 36'
          fill='none'
          className={classes.icon}
        >
          <path
            fillRule='evenodd'
            clipRule='evenodd'
            d='M26.7602 4.24003C26.7602 3.15795 26.3304 2.12019 25.5652 1.35504C24.8001 0.58989 23.7623 0.160034 22.6802 0.160034H4.32023C3.23815 0.160034 2.20039 0.58989 1.43524 1.35504C0.67009 2.12019 0.240234 3.15795 0.240234 4.24003V34.1464H0.260635C0.281035 34.3504 0.362635 34.5544 0.505435 34.7176C0.687966 34.9129 0.939861 35.0287 1.20692 35.0402C1.47398 35.0516 1.73486 34.9578 1.93343 34.7788L13.5002 26.374L25.0466 34.7992C25.1454 34.8909 25.2614 34.9622 25.3879 35.0088C25.5144 35.0554 25.6489 35.0764 25.7836 35.0707C25.9183 35.065 26.0505 35.0327 26.1726 34.9756C26.2947 34.9185 26.4043 34.8378 26.495 34.738C26.638 34.5722 26.7238 34.3648 26.7398 34.1464H26.7602V4.24003ZM12.8066 24.5788L2.28023 32.0656V4.24003C2.28023 3.69899 2.49516 3.18011 2.87774 2.79754C3.26031 2.41496 3.77919 2.20003 4.32023 2.20003H22.6802C23.2213 2.20003 23.7402 2.41496 24.1227 2.79754C24.5053 3.18011 24.7202 3.69899 24.7202 4.24003V32.0656L14.1938 24.5788C14.0076 24.3993 13.7589 24.299 13.5002 24.299C13.2415 24.299 12.9929 24.3993 12.8066 24.5788Z'
            fill='black'
          />
        </svg>
      </Box>
      <HeadSessions {...post} />
      <Content {...post} />

      <Container maxWidth='md'>
        <Divider />
        <Box
          my={3}
          display='flex'
          justifyContent='space-between'
          alignItems='center'
        >
          <Box display='flex' justifyContent='center' alignItems='center'>
            <Avatar
              src={post?.user?.avatar}
              className={classes.avatar}
              spacing={3}
            />
            <Box mx={2}>
              <Typography
                variant='body1'
                className={classes.font_bold}
                gutterBottom
              >
                {post?.user?.username}
              </Typography>{' '}
              <Typography variant='caption'>{post?.user?.country}</Typography>
            </Box>
          </Box>

          <Box display='flex'>
            <IconButton>
              <FontAwesomeIcon icon={['fab', 'facebook-f']} />
            </IconButton>
            <IconButton>
              <FontAwesomeIcon icon={['fab', 'twitter']} />
            </IconButton>
            <IconButton>
              <FontAwesomeIcon icon={['fas', 'share-alt']} />
            </IconButton>
          </Box>
        </Box>
      </Container>
    </>
  );
};

export default StoryDetail;
